[![(a histogram of downloads)](https://nodei.co/npm-dl/find-msgid-in-file.png?height=3)](https://npmjs.org/package/find-msgid-in-file)

This module (`find-msgid-in-file`) finds the MSGID of a Fidonet message in the file containing that message.

Such a file (containing a Fidonet message) is typically generated by a Fidonet message editor when it calls an external utility. (For example, GoldED+ or GoldED-NSF would generate such a file if the corresponding GoldED's `ExternUtil` configuration line contains the `@file` parameter.)

This module is written in JavaScript and requires [Node.js](http://nodejs.org/) to run. It uses some ECMAScript 2015 features, and thus a relatively recent Node.js (v4.0.0 or newer) is required.

## Installing the MSGID finder

[![(npm package version)](https://nodei.co/npm/find-msgid-in-file.png?downloads=true&downloadRank=true)](https://npmjs.org/package/find-msgid-in-file)

* Latest packaged version: `npm install find-msgid-in-file`

* Latest githubbed version: `npm install https://github.com/Mithgol/node-find-msgid-in-file/tarball/master`

You may visit https://github.com/Mithgol/node-find-msgid-in-file#readme occasionally to read the latest `README` because the package's version is not planned to grow after changes when they happen in `README` only. (And `npm publish --force` is [forbidden](http://blog.npmjs.org/post/77758351673/no-more-npm-publish-f) nowadays.)

## Using the MSGID finder

When you require the installed module, you get a function that finds the MSGID of a Fidonet message (in the file containing that message) asynchronously.

That function has two parameters. The first parameter must be the path to the file containing a Fidonet message. The second parameter is a callback function with a signature `(error, MSGID)` that asynchronously receives the MSGID. One of the following happens:

* `callback(someError)` is called if an error occurs in `fs.readFile` of the given file

* `callback(null, null)` is called if the file does not seem to contain a MSGID kludge

* `callback(null, MSGID)` is called if the MSGID is found

The MSGID kludge in the given file is expected to adhere to the FTS-0009 standard: the kludge appears on a separate line of the file, starts with `'\x01MSGID:'`, then one or several optional whitespaces, then the MSGID value, then the end of that line. Only that MSGID value (as a JavaScript string) is passed to the callback (i.e. the standard beginning of that line is removed from the string before the call).

## Testing the MSGID finder

[![(build testing status)](https://img.shields.io/travis/Mithgol/node-find-msgid-in-file/master.svg?style=plastic)](https://travis-ci.org/Mithgol/node-find-msgid-in-file)

It is necessary to install [JSHint](http://jshint.com/) for testing.

* You may install JSHint globally (`npm install jshint -g`) or locally (`npm install jshint` in the directory of the MSGID finder).

After that you may run `npm test` (in the directory of the MSGID finder). Only the JS code errors are caught; the code's behaviour is not tested.

## License

MIT license (see the `LICENSE` file).
